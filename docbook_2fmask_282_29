#title umask(2) man 페이지 

== 변경사항 ==

== [docbook] 원본문서 ==
{{{#!plain
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<chapter lang=ko>
<!-- 작성자 : yundream             -->
<!-- 작성일 : 2002/02/18           -->
<!-- 연락처 : dreamyun@yahoo.co.kr -->

<!-- 함수 이름을 입력합니다 -->
<title>umask(2))</title>

<!-- 이건 함수에 대한 대략적인 설명이구요 -->
<para>
	파일생성시 사용될 mask를 설정한다.
</para>
 
<!-- 여기에 함수의 간단한 사용법이 들어갑니다 -->
<section>
	<title>사용법</title>
	<para>
		<screen>
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

mode_t umask(mode_t mask);
		</screen>
	</para>
</section>

<!-- 여기엔 함수의 자세한 설명 이 들어갑니다 -->
<section>
	<title>설명</title>
	<para>
		umask는 umask를 mask & 0777로 설정한다. 
	</para>
	<para>
		umask를 통해서 mask를 만들면 이후 open(2)등을 통해서 생성되는 모든 파일에 
		적용된다. 또한 umask의 값은 open(2)에 의해 생성되는 권한에 우선한다. 
		예를 들어 umask 값을 022로 했을 경우 mode를 066으로 했다면 
		0666 & -022 = 0644 = rw-r--r-- 권한을 가지는 파일을 만든다.      
		<screen>
0666 &amp; -022 = 0644 = rw-r--r--
		</screen>
	</para>
</section>

<!-- 함수가 되돌려주는 값이구요 -->
<section>
	<title>반환값</title>
	<para>
		이 함수는 언제나 성공하며 mask값을 리턴한다. 
	</para>
</section>

<section>
	<title>예제</title>
	<para>
		<screen>
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;

int main()
{
    int fd;

    umask(022);
    fd = open("test.txt", O_CREAT|O_WRONLY, 0666);
    close(fd);
}
		</screen>
		위의 파일을 실행시키면 test.txt라는 파일이 생성되는데 권한을 보면 
		0666이 아닌 0644으로 되어있음을 알 수 있다.
	</para>
</section>
</chapter>
}}}

