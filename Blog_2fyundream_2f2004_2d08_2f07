#action Blog Add Blog
##Blog
{{{#!blog yundream 2004-08-07T08:42:05 joinc 서버 이전 작업
음 서버 유지비용을 아끼기 위해서 친구 (회사)서버에 기생하기로 했다. 기생의 댓가로 친구 서버의 이전작업까지 동시에 해주어야 한다. 물론 서비스 중단 사태는 없어야 한다.. 흑.. 

=== 해야할일  ===
친구 서버가 현재 joinc ip를 사용하기로 했으므로 내가 해야할일은 
 1. 도메인 변경작업으로 인한 서비스 중단 사태 막기 
 1. joinc 컨탠츠를 친구 서버로 옮기기 위한 서버 설정작업이다.   
 1. 기타 서버 설정 작업

==== 도메인 변경작업으로 인한 서비스 중단 사태 막기 ====
'''1'''번 문제는 우선 joinc 서버에 친구 서버의 사이트를 몽땅 옮겨서 서비스 가능상태로 만들어 놓고, 기존의 도메인이름에 대한 ip를 몽땅 바꾸는 방식으로 해결하기로 했다. 도메인정보 변경사항이 전달되는데 2-3일 정도 걸린다고 보면 되니까, 4일 후 부터는 모든 도메인에 대한 ip가 joinc로 향하게 될 것이다.  

내 서버에서 친구의 사이트를 옮길려고 보니까. 몇 가지 문제점이 발견되었다.   
 1. sqlite의 지원 
 1. sqlite의 지원을 위한 APM 버젼

이 문제점을 해결하기 위해서 APM(12)+Sqlite(12)을 새로 빌드해야 한다. 상당히 귀찮을 것 같다.


===== APM+Sqlite 설치 =====
이미 APM, Sqlite 은 설치된 상태인데, 현재 설치된 PHP4.x에서는 정식으로 Sqlite를 지원하지 않는다. 그래서 PHP5.x를 받아서 새로 빌드 하기로 했다. 빌드 하는 김에 Apache(12)도 최신버젼으로 업그레이드 시켜야지

Apache와 PHP의 컴파일은 [wiki:APM APM 설치하기]를 그대로 따랐다.

다만 PHP5.x를 제대로 컴파일 하기 위해서 libxml2-2.5.10.x 이상의 버젼이 필요해서 관련 패키지를 따로 받아서 설치했다. 

어쨋든 make를 하는데 왠 에러가 이리 많이도 떨어지냐.. 그냥 일일이 손수 소스를 수정해가면서 컴파일을 성공시켰다. 아 젠장.. 한시간 정도 삽질한거 같다. 

==== joinc 컨텐츠 옮기기 ====
일단 친구 서버에 APM환경이 모두 구축되어 있으니 joinc 이전작업은 별로 복잡할 것 같지가 않다. 이전 당일날 몽땅 백업 받은 다음 풀고 나서 삽질좀 해주면 될것 같다.  

아 지금부터 작업해야 한다. 귀찮다. 그래도 해야 한다. T.T

}}}

