#title docbook chapter Template
'''목차'''
[[TableOfContents]]

== HTML 문서 ==

== [docbook] 원본문서 ==

{{{#!plain
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<chapter lang=ko>
<!-- 작성자 : yundream             -->
<!-- 작성일 : 2002/02/18           -->
<!-- 연락처 : dreamyun@yahoo.co.kr -->

<!-- 함수 이름을 입력합니다 -->
<title>함수명(2)</title>

<!-- 이건 함수에 대한 대략적인 설명이구요 -->
<para>
소켓 지정번호 s 에 접속된 호스트정보를 알아오고 싶을때 사용한다.  
</para>
 
<!-- 여기에 함수의 간단한 사용법이 들어갑니다 -->
<section>
	<title>사용법</title>
	<para>
		<screen>
#include &lt;sys/socket.h&gt;

int getpeername(int s, struct sockaddr *name, socklen_t *namelen);
		</screen>
	</para>
</section>

<!-- 여기엔 함수의 자세한 설명 이 들어갑니다 -->
<section>
	<title>설명</title>
	<para>
		때때로 네트웍으로 접근한 소켓 지정번호 <emphasis>s</emphasis> 를 이용하여 
		접근한 호스트의 정보를 알아오고 싶을때가 있을것이다. 이럴경우 사용할수 있으며 
		s 에는 소켓저정번호, *name 는 알아낸 호스트의 정보를 저장할 sockaddr 구조체, 
		마지막 *namelen 은 name이 가리키고 있는 영역의 크기를 나타낸다. 
	</para>
</section>

<!-- 함수가 되돌려주는 값이구요 -->
<section>
	<title>반환값</title>
	<para>
		성공할경우 0을 실패했을경우에는 -1을 반환하며, 적당한 errno 값을 
		설정한다. 
	</para>
</section>

<!-- 에러가 발생했을때 되돌려주는 값들입니다 -->
<section>
	<title>에러</title>
	<para>
		<variablelist>	
			<varlistentry>
			<term>EBADF</term>	
			<listitem>
				<para>	
					s 가 유효한 기술자가 아니다. 
				</para>	
			</listitem>
			</varlistentry>

			<varlistentry>
			<term>ENOTSOCK</term>
			<listitem>
				<para>
					s 가 소켓이 아닌 파일일경우
				</para>
			</listitem>
			</varlistentry>
			<varlistentry>
			<term>ENOTCONN</term>
			<listitem>
				<para>
					소켓이 연결되어 있지 않을경우
				</para>
			</listitem>
			</varlistentry>
			<varlistentry>
			<term>ENOBUFS</term>
			<listitem>
				<para>
					시스템에 연산을 위해서 이용할수 있는 자원이 부족할때
				</para>
			</listitem>
			</varlistentry>
		</variablelist>	
	</para>
</section>

<!-- 마지막으로 에제 입니다                                                 -->
<!-- 여기에는 완전한 예제가 들어가 있는데, 굳이 완전한 예제를 만들필요 없이 -->
<!-- 코드 일부분만 작성해서 올려주셔도 됩니다                               --> 
<!-- "<", ">", "&" 등은 변환해 주셔야 하는데, 귀찮으시면 :-) 변환 하지 않   -->
<!-- 아도 됩니다. 제가 검사 해서 올리겠습니다                               -->
<!-- 예제에 대한 간단한 설명을 적어주셔도 되구요                            -->
<section>
	<title>예제</title>
	<para>
		<screen>
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;unistd.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main(int argc, char **argv)
{
    int server_sockfd, client_sockfd;
    int state, client_len;

    struct sockaddr_in clientaddr, serveraddr, myaddr;

	....
    // 바로여기
    getpeername(client_sockfd, (struct sockaddr *)&amp;myaddr, &amp;client_len);  

    printf("client ip is %d\n",myaddr.sin_port);
    printf("client port is %s\n",inet_ntoa(myaddr.sin_addr));
    close(client_sockfd);
    return 1;
}
		</screen>
	</para>
</section>
</chapter>
}}}

== 변경사항 ==
