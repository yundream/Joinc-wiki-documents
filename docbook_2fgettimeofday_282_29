#title gettimeofday(2)
[wiki:function_gettimeofday(2) HTML 변환문서]

{{{#!plain
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<chapter lang=ko>
<!-- 작성자 : yundream             -->
<!-- 작성일 : 2004/03/09           -->
<!-- 연락처 : yundream@joinc.co.kr -->

<!-- 함수 이름을 입력합니다 -->
<title>gettimeofday(2)</title>

<!-- 이건 함수에 대한 대략적인 설명이구요 -->
<para>
	현재 시간을 가져오고 시스템의 시간값을 설정한다.
</para>
 
<!-- 여기에 함수의 간단한 사용법이 들어갑니다 -->
<section>
	<title>사용법</title>
	<para>
		<screen>
#include &lt;sys/time.h&gt;
#include &lt;unistd.h&gt;

int gettimeofday(struct timeval *tv, struct timezone *tz);
int settimeofday(const struct timeval *tv ,  const  struct
             timezone *tz);
		</screen>
	</para>
</section>

<!-- 여기엔 함수의 자세한 설명 이 들어갑니다 -->
<section>
	<title>설명</title>
	<para>
		gettimeofday()은 time(2)와 매우 비슷하지만 마이크로초 단위의 시간
		까지 되돌려준다. 현재는 time(2)를 대신해서 쓰이고 있으며, 
		가능한 time(2)대신 이 함수를 사용하는 걸 권장한다.	
	</para>
	<para>
		첫번째 인자인 <emphasis>tv</emphasis>는 현재 시스템 시간을 저장하기 
		위한 구조체로 다음과 같이 정의되어 있다.
		<screen>
struct timeval
{
    long tv_sec;       // 초
    long tv_usec;      // 마이크로초
}
		</screen>
		두번째 인자인 <emphasis>tz</emphasis>은 타임존을 설정하기 
		위해서 사용된다.
		<screen>
struct timezone
{
    int tz_minuteswest:  // 그리니치 서측분차  
    int tz_dsttime       // DST 보정타입(일광 절약시간)
}
		</screen>
		현재 timezone 구조체는 사용되지 않고 있으며, 앞으로도 지원되지 
		않을 것이다. 간혹 커널 소스등에서 이 필드가 사용되는 경우가 있는데, 
		모든 경우에 버그로 판단되어서 무시한다. 복잡하게 생각할 필요 없이 
		tz은 NULL을 사용하도록 한다.
	</para>
</section>

<section>
	<title>반환값</title>
	<para>
		성공하면 0 실패하면 -1을 리턴한다. 
	</para>
</section>
<section>
	<title>에러</title>
	<para>
		<variablelist>	
			<varlistentry>
			<term>EFAULT</term>	
			<listitem>
				<para>	
				tv나 tz이 접근할 수 없는 영역을 가리키고 있다.
				</para>	
			</listitem>
			</varlistentry>
		</variablelist>	
	</para>
</section>

<!-- 마지막으로 에제 입니다                                                 -->
<!-- 여기에는 완전한 예제가 들어가 있는데, 굳이 완전한 예제를 만들필요 없이 -->
<!-- 코드 일부분만 작성해서 올려주셔도 됩니다                               --> 
<!-- "<", ">", "&" 등은 변환해 주셔야 하는데, 귀찮으시면 :-) 변환 하지 않   -->
<!-- 아도 됩니다. 제가 검사 해서 올리겠습니다                               -->
<!-- 예제에 대한 간단한 설명을 적어주셔도 되구요                            -->
<section>
	<title>예제</title>
	<para>
		<screen>
#include &lt;sys/time.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main()
{
    struct timeval mytime;

    // 현재 시간을 얻어온다.
    gettimeofday(&amp;mytime, NULL);
    printf("%ld:%ld\n", mytime.tv_sec, mytime.tv_usec);

    // 시간을 1시간 뒤로 되돌려서 설정한다.
    mytime.tv_sec -= 3600;
    settimeofday(&amp;mytime, NULL);
    return 0;
}
		</screen>
	</para>
</section>
<section>
	<title>참고문헌</title>
	<para>
		<orderedlist>
		<listitem>
			<para>
				<ulink url="http://www.joinc.co.kr/modules/moniwiki/wiki.php/article_unixtime">Unix 시간 다루기</ulink>
			</para>
		</listitem>
		<listitem>
			<para>
			</para>
		</listitem>
		<listitem>
			<para>
				time(2)
			</para>
		</listitem>
		<listitem>
			<para>
				stime(2)
			</para>
		</listitem>
		</orderedlist>
	</para>
</section>
</chapter>
}}}
