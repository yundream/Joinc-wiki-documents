''머드 게임 서버에 관련된 내용을 담은 위키''' 

|| 만든날 	|| 2004/05/09 				||
|| 관리자 	|| gururang				||
|| 홈페이지	|| http://synova.zetyx.net  		||
|| 이메일	|| [mailto:synova@empal.com]	||

"목차"
[[TableOfContents]]

== Client의 입력문제 ==
{{{#!plain
클라이언트 프로그램마다 데이터 전송 시기가 틀리다.
예를 들어서 "이야기" 같은 프로그램을 사용했을때에는 영문이나 숫자일경우 1글자(1byte)를 입력했을때 전송이 되고, 한글인경우는 한글자(2byte)를 입력했을때 전송이 된다.
그에 반면 "새롬 데이타맨 프로"같은 프로그램을 사용했을때에는 엔터를 칠때 데이터가 전송된다.
전자의 경우 글자단위의 전송, 후자의 경우 라인단위의 전송이 되겠다.

그런데 문제는, 동일한 환경의 클라이언트 프로그램으로 어떤 서버에 접속하느냐에 따라서 틀린 결과가 나오는것을 알 수 있었다.
예를 들어서 내가 만든 서버 프로그램으로 텔넷 접속을 했을경우에는 글자단위의 전송이 이루어졌는데,
하이텔 서버에 텔넷 접속을 했을경우 라인단위의 전송이 이루어졌다.
나는 이것을 보며 많은 고민을 해왔다.
동일한 환경의 클라이언트인데 서버에 따라 다른 결과가 나온걸 보고, 서버와 클라이언트의 사전 교감을 통해 입을 맞춘것(?)이 아닌가 하는생각이 들었다.
그래서 텔넷 접속은 터미널과 동일하다는 판단하에(나중에는 서로 틀리다는것을 알았지만..) 터미널을 제어하는 termios 관련 함수를 쓰지 않았나 하는 생각이 들었고,
서버프로그램에서 클라이언트에 연결된 소켓 파일지시자(fd)에 일일이 터미널 설정을 해줬지만 원하는 결과를 얻진 못하였다.
그렇다면 무엇이 문제인것인가... 소켓은 터미널이 아닌것인가... 라는 의문이 들었고, 그것을 확인해 보기 위하여
 printf("tty = %d\t%s\n ",isatty (sockfd),ttyname(sockfd));
코드를 accept를 통해 새로 연결된 소켓 파일 지시자(sockfd)를 인자로 넣어 실험해보았는데,
결과는 tty=0  (null) 이었다..... 즉 터미널이 아니란 이야기 였다.
그때서야 터미널과 소켓을 별개의 문제라는것을 깨달았다...(이때가 이 문제로 고민한지 5시간정도 &#46124;다.)
joinc 채널에서 이것저것 질문을 올린결과, 소켓은 터미널하고 연결지을수 없으며, 하이텔을 연결했을때 라인단위로 전송된것은 눈속임(?) 이라는 말을 들었다.
그것이 사실인가 확인해보기 위하여 ethereal 이라는 프로그램으로 네트워크 패킷 캡쳐를 해봤다.
테스트 텔넷 프로그램은 이야기 멀티 프로그램이고, 테스트 서버 프로그램은 내가 만든 서버 프로그램, 하이텔 서버 였다.
먼저 내가 만든 서버 프로그램을 로긴하여 데이터를 입력해봤다.
패킷 분석을 해본 결과 글자 단위로 전송되는것이였다.(이미 예상한 결과다.)
두번째로 하이텔에 접속해본결과
마찬가지로 글자 단위로 전송되었다. 하지만..하이텔은 \n(개행문자)가 들어올때까지 처리를 미뤄놓고 있었다.
즉 내가 한글자(예를 들어 'a')를 치면 전송이 되는데, 하이텔은 그것을 바로 처리하지 않고, 클라이언트 프로그램(이야기 멀티)에게 내가 친 글자('a')가 전송되었다.
즉 위에서 jonc 채널 멤버들이 말한 눈속임 효과인것이었다.
하이텔에 접속해보면 아이디와 비밀번호를 치는 곳이 있는데, 비밀번호 같은경우 '*' 문자를 대신 리턴해줌으로써 눈속임을 한것이다.
이 모든걸 알아내는데 7~8시간이 걸렸다...
joinc에서 채팅한 것만 2~3시간은 될것이다.
도움을 주신 윤드림,산하,다즐님에게 감사드린다.
}}}
