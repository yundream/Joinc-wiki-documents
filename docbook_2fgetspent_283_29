#title getspent(3)
[wiki:man/3/getspent HTML 변환문서]

{{{#!plain
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<chapter lang=ko>
<!-- 작성자 : yundream             -->
<!-- 작성일 : 2004/02/13           -->
<!-- 연락처 : yundream@joinc.co.kr --> 

<!-- 함수 이름을 입력합니다 -->
<title>getspent(3)</title>

<!-- 이건 함수에 대한 대략적인 설명이구요 -->
<para>
	Shadow 패스워드 정보를 가져온다.
</para>
 
<!-- 여기에 함수의 간단한 사용법이 들어갑니다 -->
<section>
	<title>사용법</title>
	<para>
		<screen>
#include &lt;shadow.h&gt;

struct spwd *getspent();
struct spwd *getspnam(char *name);
		</screen>
	</para>
</section>

<!-- 여기엔 함수의 자세한 설명 이 들어갑니다 -->
<section>
	<title>설명</title>
	<para>
		getspent()함수는 shadow 패스워드 시스템에서 사용자의 패스워드 정보를
		얻어온다. 리눅스에서 shadow 정보는 /etc/shadow 파일에 저장된다. 
		이 함수는 실행 후 패스워드 구조체 엔트리의 포인터를 되돌려준다. 
		이 때 되돌려주는 구조체는 <emphasis>spwd</emphasis>로서 다음과 
		같이 정의되어 있다. 이 구조체는 shadow 패스워드를 조작하는 
		다른 함수들에도 공통적으로 사용된다.
		<screen>
struct spwd
{
    char *sp_namp;    /* 유저 아이디 */
    char *sp_pwdp;    /* encrypt 된 유저 패스워드 */
    long sp_lstchg;   /* 최근 수정일 */
    int  sp_min;      /* 수정작업간의 최소 날짜 */
    int  sp_max;      /* 수정작업간의 최대 날짜 */
    int  sp_warn;     /* 패스워드가 무효화 되기전 경고하는 기간 */
    int  sp_inact;    /* 패스워드가 무효화된뒤, 
                         계정이 사용불능이 될때까지의 기간 */
    int  sp_expire;   /* 계정 사용불능 날짜 */
    int  sp_flag;     /* 나중을 위해서 비워둠  */
}
		</screen>
		얻어오는 정보는 패스워드 관리에 관련된 정보들이다.	
	</para>
	<para>
		getspnam()함수는 인자로 주어지는 <emphasis>name</emphasis>과 
		같은 유저이름에 대한 패스워드 정보를 읽어서 되돌려준다.
	</para>
</section>

<!-- 함수가 되돌려주는 값이구요 -->
<section>
	<title>반환값</title>
	<para>
		일치하는 패스워드 엔트리가 없으면 NULL을 리턴한다. 
	</para>
</section>

<!-- 마지막으로 에제 입니다                                                 -->
<!-- 여기에는 완전한 예제가 들어가 있는데, 굳이 완전한 예제를 만들필요 없이 -->
<!-- 코드 일부분만 작성해서 올려주셔도 됩니다                               --> 
<!-- "<", ">", "&" 등은 변환해 주셔야 하는데, 귀찮으시면 :-) 변환 하지 않   -->
<!-- 아도 됩니다. 제가 검사 해서 올리겠습니다                               -->
<!-- 예제에 대한 간단한 설명을 적어주셔도 되구요                            -->
<section>
	<title>예제</title>
	<para>
		<screen>
#include &lt;shadow.h&gt;
#include &lt;stdio.h&gt;

int main()
{
    struct spwd *myspwd;

    while((myspwd = getspent()) != NULL)
    {
        printf("%-20s%s\n", myspwd->sp_namp, myspwd->sp_pwdp);
    }
    printf("=====================================\n");
    myspwd = getspnam("yundream");
    printf("%-20s%s\n", myspwd->sp_namp, myspwd->sp_pwdp);
}
		</screen>
	</para>
</section>
<section>
	<title>참고문헌</title>
	<para>
		<orderedlist>
			<listitem>
			<para>
			<ulink url="http://www.joinc.co.kr/modules/moniwiki/wiki.php/article_usr_info_get">유저정보 얻어오기</ulink>
			</para>
			</listitem>
		</orderedlist>
	</para>
</section>
</chapter>
}}}
