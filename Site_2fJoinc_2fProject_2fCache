#title Joinc Cache 페이지 프로젝트

== 이유 ==
Joinc는 컨텐츠를 유지하기 위해서 Moniwiki를 사용한다. Moniwiki는 나름대로의 문법을 가지고 문서를 작성하며, 작성된 문서를 분석해서 HTML(:12) 포멧으로 출력을 한다. 문서가 커지다 보면 아무래도 분석해서 HTML 문서로 만드는데 많은 시간이 소비되게 된다. 특히 Joinc는 자동링크 기능을 위해서 복잡한 정규표현을 사용하는데, 이때 상당한 시간이 소모된다. 자동 링크란 accept() 와 같이 괄호가 있을 경우 연결가능한 페이지로 자동으로 링크시키는 기능이다.

이 문제를 해결하기 위해서, 이미 만들어진 페이지는 HTML Cache 페이지를 만들어서 분석이 끝난 페이지를 보여주도록 하기로 했다.

== 프로세스 ==
다음과 같은 프로세스를 따를 것이다.
   1. Cache 디렉토리에 동일한 페이지명을 가진 파일이 있는지 확인한다. 만약 있다면 Cache에 있는 웹페이지를 그대로 include 시킨다.
   1. 만약 존재하지 않는다면, 일반적인 규칙에 따라서 wiki(:12)페이지를 분석해서 HTML(:12) 코드로 만든다.
   1. 보여주는 작업이 모두 끝나면, 분석된 페이지를 Cache 디렉토리에 파일 형태로 저장한다.
 
Cache의 내용이 업데이트 되는 시기는 다음과 같다.
   1. 문서를 새로 생성했을 경우. 
   1. 문서를 삭제했을 경우.
   1. 문서를 수정했을 경우.

== 버그/해야할일 ==
  * Comment 메크로시 캐쉬갱신이 안됨. Cache 페이지가 지워지도록 Comment 메크로를 수정해야 함
  * 다른페이지를 참조할 경우, 참조된 페이지가 변경되어도 이를 인지하지 못함
    예를들어 A페이지에서 Include 메크로를 이용해서 B 페이지를 불러왔다면, B페이지가 바뀌었다고 해도, A페이지는 자신의 캐쉬에 있는 데이터를 읽어오게됨. '''Include를 가진 문서의 캐쉬를 일정주기로 지워주는 방법이 있음'''. 비효율적인 방법이긴 하지만, 문서의 변경작업과 Include를 포함한 문서자체가 많지 않다는 것을 가정하면 크게 문제되지는 않을 것이라 생각이 된다.
    하루 간격으로 지워주는 Cron 프로그램을 작성할 계획이다.
